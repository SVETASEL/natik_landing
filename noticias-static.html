<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Noticias - Natik (Static)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&family=Martel:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="assets/favicon-32x32.png" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/favicon-16x16.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/apple-touch-icon.png"
    />

    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-WVTZC76F");
    </script>
    <!-- End Google Tag Manager -->

    <!-- Google Analytics 4 -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-W4463882MQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-W4463882MQ");
    </script>
    <!-- End Google Analytics 4 -->

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-WVTZC76F"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
      ></iframe
    ></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <!-- Navigation Bar -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="nav-logo">
          <a href="index.html">
            <img src="assets/logo_natik.svg" alt="Natik Logo" class="logo" />
          </a>
        </div>

        <div class="nav-menu">
          <ul class="nav-links">
            <li><a href="index.html#que-es-natik">Que es Natik</a></li>
            <li><a href="index.html#para-anfitriones">Para Anfitriones</a></li>
            <li><a href="index.html#como-sumarte">Como sumarte</a></li>
            <li><a href="noticias-static.html" class="active">Noticias</a></li>
            <li><a href="index.html#contacto">Contacto</a></li>
          </ul>
        </div>

        <div class="nav-cta">
          <a href="index.html#hazte-anfitrion" class="cta-button">Hazte Anfitrion</a>
        </div>

        <!-- Mobile menu toggle -->
        <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <!-- News Hero Section -->
    <section class="news-hero">
      <div class="news-hero-container">
        <h1 class="news-hero-title">Noticias Natik</h1>
        <p class="news-hero-subtitle">
          Mientras preparamos el backend, esta página está en modo estático. ¡Vuelve pronto!
        </p>
      </div>
      <div class="news-hero-decoration">
        <img
          src="assets/bottom_img.svg"
          alt="Mountain decoration"
          class="news-hero-decoration-img"
        />
      </div>
    </section>

    <!-- News Grid Section (same structure as noticias.html) -->
    <section class="news-grid-section">
      <div class="news-container">
        <div class="news-grid" id="newsGrid">
          <!-- News cards will be dynamically loaded here -->
        </div>
        
        <!-- Loading state -->
        <div class="news-loading" id="newsLoading">
          <p>Cargando noticias...</p>
        </div>
        
        <!-- Empty state -->
        <div class="news-empty" id="newsEmpty" style="display: none;">
          <p>No hay noticias disponibles en este momento.</p>
        </div>
      </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
      <div class="footer-container">
        <div class="footer-content">
          <div class="footer-brand">
            <img
              src="assets/logo_natik.svg"
              alt="Natik Logo"
              class="footer-logo"
            />
          </div>

          <nav class="footer-nav">
            <a href="index.html#que-es-natik" class="footer-link">Que es Natik</a>
            <a href="index.html#para-anfitriones" class="footer-link">Para Anfitriones</a>
            <a href="index.html#como-sumarte" class="footer-link">Como sumarte</a>
            <a href="noticias-static.html" class="footer-link">Noticias</a>
            <a href="index.html#contacto" class="footer-link">Contacto</a>
          </nav>

          <div class="footer-right">
            <div class="footer-social">
              <a
                href="https://www.instagram.com/natik.travel/"
                class="social-link"
                aria-label="Instagram"
              >
                <img
                  src="assets/Instagram_icon.svg"
                  alt="Instagram"
                  class="social-icon"
                />
              </a>
              <a
                href="https://www.linkedin.com/company/natik/"
                class="social-link"
                aria-label="LinkedIn"
              >
                <img
                  src="assets/Linkedin_icon.svg"
                  alt="LinkedIn"
                  class="social-icon"
                />
              </a>
              <a
                href="https://wa.me/56956090963"
                class="social-link"
                aria-label="WhatsApp"
              >
                <img
                  src="assets/whatsapp_icon.svg"
                  alt="WhatsApp"
                  class="social-icon"
                />
              </a>
            </div>

            <div class="footer-support">
              <span class="support-text">Apoyado por</span>
              <img
                src="assets/start-up_white.png"
                alt="Start-up Chile"
                class="support-logo"
              />
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="script.js"></script>
    <script>
      // Tell news.js to use legacy data only (no backend calls)
      window.NEWS_STATIC_MODE = true;
      // Prefer loading articles from a JSON file
      window.NEWS_JSON_URL = 'assets/news.json';
    </script>
    <script src="news.js"></script>
    <script>
      // Bootstrap the page with legacy newsData without using the backend
      document.addEventListener('DOMContentLoaded', function () {
        try {
          // Ensure required globals from news.js exist
          if (!document.getElementById('newsGrid')) return;

          if (Array.isArray(window.newsData) && window.newsData.length) {
            if (typeof window.newsLoading !== 'undefined' && newsLoading) newsLoading.style.display = 'none';

            // Use the same globals that news.js relies on
            window.allArticles = window.newsData.slice();
            window.articlesPerPage = window.articlesPerPage || 6;
            window.displayedArticles = window.allArticles.slice(0, window.articlesPerPage);
            window.currentPage = 1;

            if (typeof window.renderNewsCards === 'function') {
              window.renderNewsCards();
            }
            if (typeof window.setupLoadMoreButton === 'function') {
              window.setupLoadMoreButton();
            }
          } else {
            const empty = document.getElementById('newsEmpty');
            const loading = document.getElementById('newsLoading');
            if (loading) loading.style.display = 'none';
            if (empty) empty.style.display = 'block';
          }
        } catch (e) {
          console.error('Static noticias bootstrap error:', e);
        }
      });
    </script>
    <script>
      // Dev-only: Export current legacy newsData to JSON if URL has ?export=1
      (function () {
        try {
          const params = new URLSearchParams(window.location.search);
          if (params.get('export') === '1' && Array.isArray(window.newsData)) {
            const data = window.newsData.map(a => ({
              id: a.id,
              title: a.title,
              excerpt: a.excerpt,
              content: a.content,  // HTML content preserved
              image: a.image,
              category: a.category,
              date: a.date,
              featured: !!a.featured
            }));
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'news.json';
            document.body.appendChild(link);
            link.click();
            link.remove();
            URL.revokeObjectURL(url);
            console.log('news.json exported');
          }
        } catch (e) {
          console.warn('Export failed:', e);
        }
      })();
    </script>
  </body>
</html>
